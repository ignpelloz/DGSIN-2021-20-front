<h1>DGSIN-2021-20</h1>

<table class="table">
  <!-- tells bootstrap to turn this into a responsive table -->

  <thead>
    <tr>
      <td>Autonomous Community</td>
      <td>Year</td>
      <td>Average Expenditure per Household</td>
      <td>Average Expenditure per Person</td>
      <td>Porcentual Distribution</td>
      <td>Actions</td>
    </tr>
  </thead>

  <tbody>

    <tr>
      <td><input id="new-autonomous_community" class="form-control" #newAutonomousCommunity /></td>
      <td><input id="new-year" class="form-control" #newYear type="number" /></td>
      <td><input id="new-avg_expenditure_household" class="form-control" #newAvgExpenditureHousehold type="number" /></td>
      <td><input id="new-avg_expenditure_person" class="form-control" #newAvgExpenditurePerson type="number" /></td>
      <td><input id="new-porcentual_distribution" class="form-control" #newPorcentualDistribution type="number" /></td>
      <td><button class="btn btn-primary" (click)="
          addExpenditure(newAutonomousCommunity.value,newYear.valueAsNumber,newAvgExpenditureHousehold.valueAsNumber,newAvgExpenditurePerson.valueAsNumber,newPorcentualDistribution.valueAsNumber);
          newAutonomousCommunity.value = newYear.value = newAvgExpenditureHousehold.value = newAvgExpenditurePerson.value = newPorcentualDistribution.value = ''">Add</button></td>
      <!-- <td><button class="btn btn-success" (click)="loadInitialData();">LID</button></td> --> 
    </tr>

    <!-- repeat: one row per object (angular's *ng)-->
    <tr *ngFor="let expenditure of expenditures">
      <!--
      <td><a routerLink="/expenditure/{{expenditure.autonomous_community}}/{{expenditure.year}}">{{expenditure.autonomous_community}}</a></td> <!-- Interpolacion: JS/TS code that will be run on view render-->
      <td>{{expenditure.autonomous_community}}</td>
      <td>{{expenditure.year}}</td>
      <td>{{expenditure.avg_expenditure_household}}</td>
      <td>{{expenditure.avg_expenditure_person}}</td>
      <td>{{expenditure.porcentual_distribution}}</td>

      <!-- TODO: use routerLink (to switch to the edit view) on a button-->
      <td><button class="btn btn-warning" routerLink="/expenditures/{{expenditure.autonomous_community}}/{{expenditure.year}}">Edit</button></td>
      <td><button class="btn btn-danger" (click)="deleteExpenditure(expenditure.autonomous_community, expenditure.year)">Delete</button></td>
    </tr>
    <tr>
      <td><button class="btn btn-danger" (click)="deleteExpenditures()">Delete all</button></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>

</table>
